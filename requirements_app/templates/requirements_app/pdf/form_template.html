<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>E-Parliament Requirements Form</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(to bottom, #f0f4f8, #e8f0fe);
      color: #333;
      margin: 30px;
      line-height: 1.5;
      font-size: 0.9em; /* Reduced font size */
    }

    h1, h4, h5 {
      color: #28a745;
    }

    h1 {
      font-size: 2.2em; /* Slightly larger for visibility */
      margin: 15px 0 5px 0; /* Added margin-top for spacing */
      text-align: center;
      color: #1a7b30; /* Darker green for better contrast */
      -webkit-text-fill-color: #1a7b30; /* Override gradient for clarity */
      font-weight: 600;
    }

    h4 {
      background: linear-gradient(to right, #28a745, #34c759);
      color: white;
      padding: 10px 16px;
      margin: -20px -20px 15px -20px;
      border-radius: 12px 12px 0 0;
      font-size: 1.2em;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    h5 {
      margin-top: 0;
      font-size: 1em;
      background: none;
      color: #2c3e50;
    }

    .header {
      text-align: center;
      margin-bottom: 40px;
      padding: 20px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .logo {
      max-width: 120px;
      margin-bottom: 10px;
      border-radius: 8px;
      transition: transform 0.3s ease;
    }

    .logo:hover {
      transform: scale(1.05);
    }

    .subtitle {
      font-size: 0.9em;
      color: #666;
    }

    .section {
      background: #fff;
      padding: 20px;
      margin-bottom: 25px;
      border-radius: 12px;
      border: 1px solid #d1e0ff;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .section:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }

    .info-table {
      width: 100%;
      border-collapse: collapse;
    }

    .info-table tr {
      transition: background 0.3s ease;
    }

    .info-table tr:hover {
      background-color: rgba(40, 167, 69, 0.05);
    }

    .info-table td {
      padding: 8px 10px; /* Reduced padding to decrease spacing */
      vertical-align: middle;
      border-bottom: 1px solid #e0e7ff;
    }

    .label {
      width: 35%;
      font-weight: 600;
      color: #2c3e50;
      white-space: nowrap;
    }

    .value {
      width: 65%;
      color: #34495e;
      font-weight: 400;
      padding-left: 15px;
      position: relative;
    }

    .value::before {
      content: '→';
      color: #28a745;
      position: absolute;
      left: 0;
      font-size: 1.1em;
      opacity: 0.7;
    }

    .na {
      color: #f87171;
      font-style: italic;
    }

    .row {
      display: flex;
      margin-bottom: 5px; /* Reduced margin to decrease spacing */
      padding: 8px; /* Reduced padding */
      border-bottom: 1px solid #e0e7ff;
      transition: background 0.3s ease;
    }

    .row:hover {
      background-color: rgba(40, 167, 69, 0.05);
    }

    .col-label {
      width: 35%;
      font-weight: bold;
      color: #2c3e50;
    }

    .col-value {
      width: 65%;
      color: #34495e;
      padding-left: 15px;
      position: relative;
    }

    .col-value::before {
      content: '→';
      color: #28a745;
      position: absolute;
      left: 0;
      font-size: 1.1em;
      opacity: 0.7;
    }

    .footer {
      text-align: center;
      font-size: 0.8em;
      color: #666;
      margin-top: 40px;
      font-style: italic;
      background: #fff;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .signature-img {
      max-width: 120px;
      margin-top: 5px;
      border-radius: 8px;
    }

    .toc {
      margin: 20px 0;
      padding: 15px;
      background: #fff;
      border-radius: 12px;
      font-size: 0.9em;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .toc h4 {
      margin-bottom: 10px;
      background: none;
      color: #28a745;
      padding: 0;
      text-transform: none;
    }

    .toc ul {
      padding-left: 20px;
      list-style: none;
    }

    .toc li {
      margin-bottom: 6px;
      position: relative;
      padding-left: 20px;
    }

    .toc li::before {
      content: '•';
      color: #28a745;
      position: absolute;
      left: 0;
      font-size: 1.1em;
    }

    table.params-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 10px; /* Reduced margin */
    }

    table.params-table th, table.params-table td {
      border: 1px solid #e0e7ff;
      padding: 8px; /* Reduced padding */
      vertical-align: middle;
    }

    table.params-table th {
      background: linear-gradient(to right, #f2f2f2, #e8f0fe);
      font-weight: 600;
      text-align: left;
      color: #2c3e50;
    }

    table.params-table td {
      background: #fff;
      color: #34495e;
    }

    table.params-table tr:hover td {
      background: rgba(40, 167, 69, 0.05);
    }

    @media print {
      body {
        background: white !important;
        color: black !important;
        margin: 0;
        padding: 10mm;
        font-size: 0.9em;
      }

      .section, .toc, .header, .footer {
        background: white !important;
        box-shadow: none;
        border: 1px solid #ddd;
      }

      h1 {
        color: #28a745 !important;
        -webkit-text-fill-color: #28a745 !important;
      }

      h4 {
        background: #28a745 !important;
        color: white !important;
      }

      .label, .col-label, .value, .col-value {
        color: black !important;
      }

      .value::before, .col-value::before {
        display: none;
      }

      .footer {
        color: #666 !important;
      }

      .info-table tr:hover, .row:hover, table.params-table tr:hover td {
        background: none !important;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    {% if logo_data_uri %}
      <img src="{{ logo_data_uri }}" alt="Parliament Logo" class="logo">
    {% else %}
      <div style="color:#666">[Parliament Logo]</div>
    {% endif %}
    <h1>E-Parliament Requirements Form</h1>
    <p class="subtitle">Submitted by {{ user.get_full_name|default:user.username }} ({{ user.username }})</p>
  </div>

  <!-- Optional Table of Contents -->
  <div class="toc">
    <h4>Contents</h4>
    <ul>
      <li>1. User Information</li>
      <li>2. Process Information</li>
      <li>3. Process Efficiency Analysis</li>
      <li>4. Expectations from New Software</li>
      <li>5. Report and Data Analysis</li>
      {% if sections_with_answers %}
      <li>6. Additional Details</li>
      {% endif %}
      {% if form.attachment %}
      <li>7. Attachments</li>
      {% endif %}
      <li>8. Submission Details</li>
    </ul>
  </div>

  <!-- User Info -->
  <div class="section">
    <h4>1. User Information</h4>
    <table class="info-table">
      <tr><td class="label">Name:</td><td class="value">{{ user.get_full_name|default:"<span class='na'>N/A</span>"|safe }}</td></tr>
      <tr><td class="label">Designation:</td><td class="value">{{ user.designation|default:"<span class='na'>N/A</span>"|safe }}</td></tr>
      <tr><td class="label">Wing:</td><td class="value">{{ user.wing_name|default:"<span class='na'>N/A</span>"|safe }}</td></tr>
      <tr><td class="label">Department:</td><td class="value">{{ user.department_name|default:"<span class='na'>N/A</span>"|safe }}</td></tr>
      <tr><td class="label">Section:</td><td class="value">{{ user.section_name|default:"<span class='na'>N/A</span>"|safe }}</td></tr>
      <tr><td class="label">Contact:</td><td class="value">{{ user.email|default:"<span class='na'>N/A</span>"|safe }} / {{ user.mobile|default:"<span class='na'>N/A</span>"|safe }}</td></tr>
    </table>
  </div>

  <!-- Process Info -->
  <div class="section">
    <h4>2. Process Information</h4>
    <table class="info-table">
      <tr>
        <td class="label">Process Name:</td>
        <td class="value">{{ form.process_name|default:"<span class='na'>N/A</span>"|safe }}</td>
      </tr>
      <tr>
        <td class="label">Process Description:</td>
        <td class="value">{{ form.process_description|default:"<span class='na'>N/A</span>"|linebreaks|safe }}</td>
      </tr>
      <tr>
        <td class="label">Process Steps:</td>
        <td class="value">
          <ol class="list-group list-group-numbered">
            {% for step in form.process_steps_detail %}
              {% if step.description %}
                <li class="list-group-item">{{ step.description }}</li>
              {% elif step|stringformat:"s" != "null" and step|length > 0 %}
                <li class="list-group-item">{{ step }}</li>
              {% endif %}
            {% empty %}
              <li class="list-group-item text-muted">No process steps defined</li>
            {% endfor %}
          </ol>
        </td>
      </tr>
      {% if form.flowchart %}
      <tr>
        <td class="label">Flowchart:</td>
        <td class="value">Attached to submission</td>
      </tr>
      {% endif %}
    </table>
  </div>

  <!-- Process Efficiency Analysis -->
  <div class="section">
    <h4>3. Process Efficiency Analysis</h4>
    <table class="params-table">
      <thead>
        <tr>
          <th width="5%">Sl.</th>
          <th width="40%">Parameter</th>
          <th width="55%">Current Method</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>Time Taken per Task</td>
          <td>{{ form.time_taken|default:"<span class='na'>N/A</span>"|safe }}</td>
        </tr>
        <tr>
          <td>2</td>
          <td>Number of People Involved</td>
          <td>{{ form.people_involved|default:"<span class='na'>N/A</span>"|safe }}</td>
        </tr>
        <tr>
          <td>3</td>
          <td>Process Steps</td>
          <td>{{ form.process_steps|default:"<span class='na'>N/A</span>"|safe }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Expectations from New Software -->
  <div class="section">
    <h4>4. Expectations from New Software</h4>
    <table class="info-table">
      <tr>
        <td class="label">Expected Features:</td>
        <td class="value">{{ form.expected_features|default:"<span class='na'>N/A</span>"|linebreaks|safe }}</td>
      </tr>
      <tr>
        <td class="label">Internal Connectivity Required:</td>
        <td class="value">{{ form.get_internal_connectivity_display|default:"<span class='na'>N/A</span>"|safe }}</td>
      </tr>
      {% if form.internal_connectivity == 'yes' %}
      <tr>
        <td class="label">Internal Connectivity Details:</td>
        <td class="value">{{ form.internal_connectivity_details|default:"<span class='na'>N/A</span>"|linebreaks|safe }}</td>
      </tr>
      {% endif %}
      <tr>
        <td class="label">External Connectivity Required:</td>
        <td class="value">{{ form.get_external_connectivity_display|default:"<span class='na'>N/A</span>"|safe }}</td>
      </tr>
      {% if form.external_connectivity == 'yes' %}
      <tr>
        <td class="label">External Connectivity Details:</td>
        <td class="value">{{ form.external_connectivity_details|default:"<span class='na'>N/A</span>"|linebreaks|safe }}</td>
      </tr>
      {% endif %}
    </table>
  </div>

  <!-- Report and Data Analysis -->
  <div class="section">
    <h4>5. Report and Data Analysis</h4>
    <table class="info-table">
      <tr>
        <td class="label">Expected Reports:</td>
        <td class="value">{{ form.expected_reports|default:"<span class='na'>N/A</span>"|linebreaks|safe }}</td>
      </tr>
      <tr>
        <td class="label">Expected Analysis:</td>
        <td class="value">{{ form.expected_analysis|default:"<span class='na'>N/A</span>"|linebreaks|safe }}</td>
      </tr>
    </table>
  </div>

  <!-- Dynamic Sections -->
  {% if sections_with_answers %}
  <div class="section">
    <h4>6. Additional Details</h4>
    {% for section_data in sections_with_answers %}
    <div style="margin-bottom: 15px; border-bottom: 1px solid #ddd; padding-bottom: 8px;">
      <h5>{{ section_data.section.title }}</h5>
      {% if section_data.section.description %}
        <p style="color:#666; margin-top:-5px; margin-bottom:8px;">{{ section_data.section.description }}</p>
      {% endif %}
      {% for answer in section_data.answers %}
      <div class="row">
        <div class="col-label">{{ answer.question.question_text }}:</div>
        <div class="col-value">{{ answer.answer_text|default:"<span class='na'>N/A</span>"|linebreaks|safe }}</div>
      </div>
      {% endfor %}
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <!-- Attachments -->
  {% if form.attachment %}
  <div class="section">
    <h4>7. Attachments</h4>
    <table class="info-table">
      <tr>
        <td class="label">Attachment:</td>
        <td class="value">PDF document attached to the submission</td>
      </tr>
    </table>
  </div>
  {% endif %}

  <!-- Submission Details -->
  <div class="section">
    <h4>8. Submission Details</h4>
    <table class="info-table">
      <tr><td class="label">Status:</td><td class="value">{{ form.get_status_display|default:"<span class='na'>N/A</span>"|safe }}</td></tr>
      <tr>
        <td class="label">Last Updated:</td>
        <td class="value">{{ form.updated_at|date:"d F, Y (h:i:s A)"|default:"<span class='na'>N/A</span>"|safe }}</td>
      </tr>
      {% if form.status == 'submitted' %}
      <tr>
        <td class="label">Submitted At:</td>
        <td class="value">{{ form.submitted_at|date:"d F, Y (h:i:s A)"|default:"<span class='na'>N/A</span>"|safe }}</td>
      </tr>
      <tr>
        <td class="label">Digital Signature:</td>
        <td class="value">
          {% if signature_data_uri %}
            <img src="{{ signature_data_uri }}" alt="[Signature]" class="signature-img">
            <p style="font-size: 0.85em; color: #666;">Signed electronically by {{ user.get_full_name }}</p>
          {% else %}
            <p class='na'>No signature available</p>
          {% endif %}
        </td>
      </tr>
      {% endif %}
    </table>
  </div>

  <!-- Footer -->
  <div class="footer">
    <p>Generated on {{ current_date|date:"F d, Y h:i:s A" }}</p>
    <p>System Generated © Software Development Section - B&IT Wing</p>
  </div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'92fd6673fc8ee14d',t:'MTc0NDU3Mjg1OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>